## SaaS Usage Ping

The "usage ping" is collected from self-installed instances of GitLab for those instances that have the feature enabled. This feature allows GitLab to understand usage data for self-installed instances broken down on an instance and namespace level.

GitLab.com, which is essentially a GitLab-hosted version of GitLab, has historically not sent usage ping data to the usage ping collector because all of the usage data is available in an unaggregated state within the GitLab.com database.  This has led to the need to segment usage data analytics into analyses that are based on self-hosted instances, and separately analyses that are based on the SaaS offering.

The purpose of this "extract" is to transform data from GitLab.com in a way that creates generated usage pings for the SaaS instance as well as each namespace.

### Technical Implementation

The SaaS usage pings are generated by iterating through a series of SQL queries and running them in the Snowflake data warehouse.  The results of the queries are then uploaded into the `saas_usage_ping` schema in the `RAW` Snowflake database.  

The queries are version controlled in the very large JSON files present within this extract.  The queries are split out into two categories: instance queries and namespace queries.  The instance queries generate data about GitLab.com as a whole, while the namespace queries generate data about each namespace on GitLab.com.

### Backfilling SaaS Usage Ping

There is also a process in place to recreate SaaS usage pings from the past.  There is a separate backfill DAG that allows backfilling usage pings for the last 12 months.  The process backfills by filtering the queries to only those that query over a specific timeframe, and then passing in the month it is backfilling for as the timeframe.  As a future iteration, we may add the ability to backfill metrics that do not query just over a specific timeframe (all-time metrics).